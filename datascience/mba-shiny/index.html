<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>Shiny App for MBA Interviews | En El Margen</title>
  <meta name="viewport" content="width=device-width">


  <!-- syntax highlighting CSS -->
  <link rel="stylesheet" href="/css/syntax.css">

  <!-- CSS -->
  <link rel="stylesheet" href="/css/reset.css">
  <link rel="stylesheet" href="/css/main.css">
  <!-- <link href="http://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet"> -->


  <!-- Fonts -->
  <link href='http://fonts.googleapis.com/css?family=Bitter:400,700,400italic|Open+Sans:400italic,600italic,400,600' rel='stylesheet' type='text/css'>
  
  
  <link rel="stylesheet" href="/css/post.css">
  

</head>
<body>
  <header style="background-image: url(/images/cover.jpg);">
  <div class="container post-container">
    <a href="/" class="home_button"></a>
    <div class="inner-container">
      <ul class="meta">
        <li>
        <p style="color:white">Publicado: 20 Dec 2016</p>
        </li>
        <li>
            <p style="color:white">Archivado en: datascience, shiny, app, mba, r-english</p>
        </li>
      </ul>      
    </div>
    <ul class="pagination">
      
        <li class="previous">
          <a href="/datascience/whatsapp">
            Previous
          </a>
        </li>
      
      
      <li class="next">
        <a href="/politica/inter-hiper-democracia">
          Next
        </a>
      </li>
      
    </ul>
  </div>
</header>
<article>
    <div id="topbar">
      
    </div>
  <div class="container">
    <h1>Shiny App for MBA Interviews</h1>
    <p>A couple of weeks ago I attended some interviews as part of my process for admission into an MBA program. While most candidates would pore over the possible questions and then try to teach them to a third party to help them with a mock interview, I decided to expedite the process by building a shiny app in <em>R</em>.</p>

<p>In the name of helping anyone out there who knows R and is applying to an MBA (I know it is probably very few people), here is the code and a simple explanation of my workflow.</p>

<h2 id="workflow">Workflow</h2>

<p>First, you will need an excel with all the possible questions to ask. I compiled one <a href="http://enelmargen.org/docs/qs.xlsx">here</a>. You place this excel in the folder with the ui.R and server.R files. When a button is pressed on the app (the “score”), the shiny app will export a very small text file into that folder. This file will be separated by pipes and have 6 columns and one row: each indicating what question and school it is and the subjective score given by the interviewer to the question.</p>

<p>When you want to analyze the results, you simply import each file and rbind them to have a nifty data.frame. I’ll also leave the code to do this later on.</p>

<p>Now, on to the code.</p>

<h2 id="serverr">server.R</h2>

<p>Change it as you wish. There is a timer, that will indicate when time is running more the standard the interview suggests.</p>

<div class="highlight"><pre><code class="language-r" data-lang="r"><span class="kn">library</span><span class="p">(</span>shiny<span class="p">)</span>
<span class="kn">library</span><span class="p">(</span>readxl<span class="p">)</span>
<span class="kn">library</span><span class="p">(</span>shinyjs<span class="p">)</span>
<span class="kn">library</span><span class="p">(</span>dplyr<span class="p">)</span>
d <span class="o">&lt;-</span> read_excel<span class="p">(</span><span class="s">&quot;qs.xlsx&quot;</span><span class="p">)</span>
jsResetCode <span class="o">&lt;-</span> <span class="s">&quot;shinyjs.reset = function() {history.go(0)}&quot;</span>

shinyServer<span class="p">(</span><span class="kr">function</span><span class="p">(</span>input<span class="p">,</span> output<span class="p">,</span> session<span class="p">)</span> <span class="p">{</span>
  EventTime <span class="o">&lt;-</span> <span class="kp">Sys.time</span><span class="p">()</span>
  
  qqt <span class="o">&lt;-</span> reactive<span class="p">({</span>
    <span class="kr">if</span><span class="p">(</span>input<span class="o">$</span>response<span class="o">==</span><span class="s">&quot;To interviewer&quot;</span><span class="p">){</span>
      d <span class="o">&lt;-</span> d <span class="o">%&gt;%</span> filter<span class="p">(</span>RESPONSE<span class="o">==</span><span class="s">&quot;To Interviewer&quot;</span><span class="p">)</span>
    <span class="p">}</span><span class="kp">else</span><span class="p">{</span>
      d <span class="o">&lt;-</span> d <span class="o">%&gt;%</span> filter<span class="p">(</span>RESPONSE<span class="o">==</span><span class="s">&quot;To applicant&quot;</span><span class="p">)</span>
    <span class="p">}</span>
    
    qs <span class="o">&lt;-</span> d<span class="o">$</span>Q
    qn <span class="o">&lt;-</span> <span class="kp">sample</span><span class="p">(</span><span class="kp">row.names</span><span class="p">(</span>d<span class="p">),</span><span class="m">1</span><span class="p">)</span>
    qr <span class="o">&lt;-</span> qs<span class="p">[</span><span class="kp">as.numeric</span><span class="p">(</span>qn<span class="p">)]</span>
    <span class="kr">if</span><span class="p">(</span><span class="kp">grepl</span><span class="p">(</span>pattern <span class="o">=</span> <span class="s">&quot;(\\[SCHOOL\\])&quot;</span><span class="p">,</span> x <span class="o">=</span> <span class="kp">qr</span><span class="p">)){</span>
      qr <span class="o">&lt;-</span> <span class="kp">gsub</span><span class="p">(</span>pattern <span class="o">=</span> <span class="s">&quot;(\\[SCHOOL\\])&quot;</span><span class="p">,</span> replacement <span class="o">=</span> input<span class="o">$</span>school<span class="p">,</span> x <span class="o">=</span> <span class="kp">qr</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="kp">as.character</span><span class="p">(</span><span class="kp">paste0</span><span class="p">(</span><span class="s">&quot;Q&quot;</span><span class="p">,</span>qn<span class="p">,</span><span class="s">&quot;: &quot;</span><span class="p">,</span><span class="kp">qr</span><span class="p">))</span>
  <span class="p">})</span>
  
  output<span class="o">$</span>qqt2 <span class="o">&lt;-</span> renderText<span class="p">({</span> 
    txt <span class="o">&lt;-</span> qqt<span class="p">()</span>
    txt 
    <span class="p">})</span>
 
  output<span class="o">$</span>eventTimeRemaining <span class="o">&lt;-</span> renderUI<span class="p">({</span>
    invalidateLater<span class="p">(</span><span class="m">1000</span><span class="p">,</span> session<span class="p">)</span>
    tm <span class="o">&lt;-</span> <span class="kp">as.numeric</span><span class="p">(</span><span class="kp">round</span><span class="p">(</span><span class="kp">difftime</span><span class="p">(</span>
      <span class="kp">Sys.time</span><span class="p">(),</span> EventTime<span class="p">,</span> units <span class="o">=</span> <span class="s">&#39;secs&#39;</span><span class="p">)))</span>
    
    <span class="kr">if</span><span class="p">(</span>tm<span class="o">&lt;</span>input<span class="o">$</span>NormalTime<span class="o">*</span><span class="m">60</span><span class="p">){</span>
    HTML<span class="p">(</span><span class="kp">paste0</span><span class="p">(</span><span class="s">&quot;Elapsed time: &quot;</span><span class="p">,</span> <span class="kp">ifelse</span><span class="p">(</span>tm<span class="o">&lt;</span><span class="m">60</span><span class="p">,</span> <span class="kp">paste0</span><span class="p">(</span>tm<span class="p">,</span> <span class="s">&quot; seconds.&quot;</span><span class="p">),</span> 
                                    <span class="kp">paste0</span><span class="p">(</span>tm<span class="o">%/%</span><span class="m">60</span><span class="p">,</span> <span class="s">&quot;:&quot;</span><span class="p">,</span> tm<span class="o">%%</span><span class="m">60</span><span class="p">,</span> <span class="s">&quot; mins.&quot;</span><span class="p">))))</span>
    <span class="p">}</span><span class="kp">else</span><span class="p">{</span>
      HTML<span class="p">(</span><span class="kp">paste0</span><span class="p">(</span><span class="s">&#39;&lt;p style=&quot;color:#9f1317;&quot;&gt;&lt;strong&gt;&#39;</span><span class="p">,</span><span class="kp">paste0</span><span class="p">(</span><span class="s">&quot;Time-up!! (&quot;</span><span class="p">,</span> <span class="kp">ifelse</span><span class="p">(</span>tm<span class="o">&lt;</span><span class="m">60</span><span class="p">,</span> <span class="kp">paste0</span><span class="p">(</span>tm<span class="p">,</span> <span class="s">&quot; seconds).&quot;</span><span class="p">),</span> 
                                      <span class="kp">paste0</span><span class="p">(</span>tm<span class="o">%/%</span><span class="m">60</span><span class="p">,</span> <span class="s">&quot;:&quot;</span><span class="p">,</span> tm<span class="o">%%</span><span class="m">60</span><span class="p">,</span> <span class="s">&quot; mins).&quot;</span><span class="p">)))),</span><span class="s">&#39;&lt;/strong&gt;&lt;/p&gt;&#39;</span><span class="p">)</span>
    <span class="p">}</span>
  <span class="p">})</span>
  
  observeEvent<span class="p">(</span>input<span class="o">$</span>reset<span class="p">,</span> <span class="p">{</span>
    shinyjs<span class="o">::</span>reset<span class="p">(</span><span class="s">&quot;qqt&quot;</span><span class="p">)</span>
  <span class="p">})</span>
  
  observeEvent<span class="p">(</span>input<span class="o">$</span>reset_button<span class="p">,</span> <span class="p">{</span>js<span class="o">$</span>reset<span class="p">()})</span>  
  
  observeEvent<span class="p">(</span>input<span class="o">$</span>submit<span class="p">,</span> <span class="p">{</span>
    tm <span class="o">&lt;-</span> <span class="kp">as.numeric</span><span class="p">(</span><span class="kp">round</span><span class="p">(</span><span class="kp">difftime</span><span class="p">(</span>
      <span class="kp">Sys.time</span><span class="p">(),</span> EventTime<span class="p">,</span> units <span class="o">=</span> <span class="s">&#39;secs&#39;</span><span class="p">)))</span>
    
    nq <span class="o">&lt;-</span> <span class="kp">substr</span><span class="p">(</span><span class="kp">as.character</span><span class="p">(</span>qqt<span class="p">()),</span> start <span class="o">=</span> <span class="m">1</span><span class="p">,</span> 
           stop <span class="o">=</span> <span class="kp">gregexpr</span><span class="p">(</span>pattern <span class="o">=</span> <span class="s">&quot;:&quot;</span><span class="p">,</span> qqt<span class="p">())[[</span><span class="m">1</span><span class="p">]][</span><span class="m">1</span><span class="p">]</span><span class="m">-1</span><span class="p">)</span>
    
    dtm <span class="o">&lt;-</span> <span class="kt">data.frame</span><span class="p">(</span><span class="s">&quot;School&quot;</span> <span class="o">=</span> input<span class="o">$</span>school<span class="p">,</span> 
                       <span class="s">&quot;Seconds&quot;</span> <span class="o">=</span> tm<span class="p">,</span>
                       <span class="s">&quot;Question&quot;</span> <span class="o">=</span> qqt<span class="p">(),</span>
                       <span class="s">&quot;Number&quot;</span> <span class="o">=</span> nq<span class="p">,</span>
                       <span class="s">&quot;Fluid&quot;</span> <span class="o">=</span> input<span class="o">$</span>score1<span class="p">,</span> 
                       <span class="s">&quot;Content&quot;</span> <span class="o">=</span> input<span class="o">$</span>score2<span class="p">,</span>
                      <span class="s">&quot;Hour&quot;</span> <span class="o">=</span> <span class="kp">Sys.time</span><span class="p">(),</span>
                      <span class="s">&quot;Date&quot;</span> <span class="o">=</span> <span class="kp">Sys.Date</span><span class="p">(),</span>
                      <span class="s">&quot;Type&quot;</span> <span class="o">=</span> <span class="s">&quot;New&quot;</span><span class="p">)</span>
    
    nm <span class="o">&lt;-</span> <span class="kp">paste0</span><span class="p">(</span><span class="kp">Sys.Date</span><span class="p">(),</span>
                 <span class="kp">gsub</span><span class="p">(</span>pattern <span class="o">=</span> <span class="s">&quot;:&quot;</span><span class="p">,</span>
                      replacement <span class="o">=</span> <span class="s">&quot;_&quot;</span><span class="p">,</span>
                      x <span class="o">=</span> <span class="kp">substr</span><span class="p">(</span><span class="kp">Sys.time</span><span class="p">(),</span><span class="m">12</span><span class="p">,</span><span class="m">19</span><span class="p">)))</span>
    
    write.table<span class="p">(</span>dtm<span class="p">,</span> file <span class="o">=</span> <span class="kp">paste0</span><span class="p">(</span><span class="s">&quot;Interviews_&quot;</span><span class="p">,</span> nm<span class="p">,</span> <span class="s">&quot;.txt&quot;</span><span class="p">),</span> 
                sep <span class="o">=</span> <span class="s">&quot;|&quot;</span><span class="p">,</span> row.names <span class="o">=</span> <span class="kc">FALSE</span><span class="p">)</span>
  <span class="p">})</span>
  
<span class="p">})</span></code></pre></div>

<h2 id="uir">ui.R</h2>

<div class="highlight"><pre><code class="language-r" data-lang="r"><span class="kn">library</span><span class="p">(</span>shiny<span class="p">)</span>
<span class="kn">library</span><span class="p">(</span>shinyjs<span class="p">)</span>
jsResetCode <span class="o">&lt;-</span> <span class="s">&quot;shinyjs.reset = function() {history.go(0)}&quot;</span>

shinyUI<span class="p">(</span>fluidPage<span class="p">(</span>
  useShinyjs<span class="p">(),</span>
  <span class="c1"># Application title</span>
  titlePanel<span class="p">(</span><span class="s">&quot;MBA Interview Questions&quot;</span><span class="p">),</span>

  <span class="c1"># Sidebar with a slider input for number of bins</span>
  sidebarLayout<span class="p">(</span>
    sidebarPanel<span class="p">(</span>
      sliderInput<span class="p">(</span><span class="s">&quot;NormalTime&quot;</span><span class="p">,</span> <span class="s">&quot;Minutes per response:&quot;</span><span class="p">,</span>
                  min <span class="o">=</span> <span class="m">0</span><span class="p">,</span> max <span class="o">=</span> <span class="m">60</span><span class="p">,</span> value <span class="o">=</span> <span class="m">2</span>
      <span class="p">),</span>
      selectInput<span class="p">(</span><span class="s">&quot;response&quot;</span><span class="p">,</span> <span class="s">&quot;Question type:&quot;</span><span class="p">,</span>
                  <span class="kt">c</span><span class="p">(</span><span class="s">&quot;To applicant&quot;</span><span class="p">,</span><span class="s">&quot;To interviewer&quot;</span><span class="p">)),</span>
          <span class="c1"># you can select which schools here...        </span>
      selectInput<span class="p">(</span><span class="s">&quot;school&quot;</span><span class="p">,</span> <span class="s">&quot;School:&quot;</span><span class="p">,</span>
                  <span class="kt">c</span><span class="p">(</span><span class="s">&quot;School 1&quot;</span><span class="p">,</span><span class="s">&quot;School 2&quot;</span><span class="p">)),</span>
      HTML<span class="p">(</span><span class="s">&#39;&lt;h4&gt; Typical Methods for Behavioural Questions &lt;/h4&gt; &lt;br/&gt;</span>
<span class="s">           &lt;h4&gt; &lt;strong&gt; STAR: &lt;/strong&gt;&lt;h4&gt; &lt;br/&gt;</span>
<span class="s">          &lt;strong&gt;S&lt;/strong&gt;ituation: indentify the situation &lt;br/&gt;</span>
<span class="s">          &lt;strong&gt;T&lt;/strong&gt;ask: identify task or project &lt;br/&gt;</span>
<span class="s">          &lt;strong&gt;A&lt;/strong&gt;ction: describe what you did &lt;br/&gt;</span>
<span class="s">          &lt;strong&gt;R&lt;/strong&gt;esult: summarize the results &lt;br/&gt;</span>
<span class="s">          &lt;h4&gt; &lt;strong&gt; CAR: &lt;/strong&gt;&lt;h4&gt; &lt;/ br&gt;</span>
<span class="s">          &lt;strong&gt;C&lt;/strong&gt;ontext: describe the context &lt;br/&gt;</span>
<span class="s">           &lt;strong&gt;A&lt;/strong&gt;ction: describe what you did &lt;br/&gt;</span>
<span class="s">           &lt;strong&gt;R&lt;/strong&gt;esult: summarize the results &lt;br/&gt;</span>
<span class="s">           &#39;</span><span class="p">)</span>
    <span class="p">),</span>
    mainPanel<span class="p">(</span>
      HTML<span class="p">(</span><span class="s">&#39;&lt;h1&gt; Question &lt;/h1&gt;&#39;</span><span class="p">),</span>
      hr<span class="p">(),</span>
      h2<span class="p">(</span>textOutput<span class="p">(</span><span class="s">&#39;qqt2&#39;</span><span class="p">)),</span>
      uiOutput<span class="p">(</span><span class="s">&#39;eventTimeRemaining&#39;</span><span class="p">),</span>
      hr<span class="p">(),</span>
      sliderInput<span class="p">(</span><span class="s">&quot;score1&quot;</span><span class="p">,</span> <span class="s">&quot;Fluidity and Security:&quot;</span><span class="p">,</span>
                  min <span class="o">=</span> <span class="m">0</span><span class="p">,</span> max <span class="o">=</span> <span class="m">10</span><span class="p">,</span> value <span class="o">=</span> <span class="m">5</span>
      <span class="p">),</span>
      sliderInput<span class="p">(</span><span class="s">&quot;score2&quot;</span><span class="p">,</span> <span class="s">&quot;Content:&quot;</span><span class="p">,</span>
                  min <span class="o">=</span> <span class="m">0</span><span class="p">,</span> max <span class="o">=</span> <span class="m">10</span><span class="p">,</span> value <span class="o">=</span> <span class="m">5</span>
      <span class="p">),</span>
      extendShinyjs<span class="p">(</span>text <span class="o">=</span> jsResetCode<span class="p">),</span>
      actionButton<span class="p">(</span><span class="s">&quot;reset_button&quot;</span><span class="p">,</span> <span class="s">&quot;New Question&quot;</span><span class="p">),</span>
      actionButton<span class="p">(</span><span class="s">&quot;submit&quot;</span><span class="p">,</span> <span class="s">&quot;Score&quot;</span><span class="p">)</span>
    <span class="p">)</span>
  <span class="p">)</span>
<span class="p">))</span></code></pre></div>

<h2 id="import-to-analyze">Import to analyze</h2>

<p>This is the code used to import all of the files starting with “Interviews” from the folder.</p>

<div class="highlight"><pre><code class="language-r" data-lang="r">LoadManyTxt <span class="o">&lt;-</span> <span class="kr">function</span><span class="p">(</span>regex<span class="p">,</span> separator <span class="o">=</span> <span class="s">&quot;|&quot;</span><span class="p">){</span>
  a <span class="o">&lt;-</span> <span class="kp">list.files</span><span class="p">()[</span><span class="kp">grepl</span><span class="p">(</span>pattern <span class="o">=</span> regex<span class="p">,</span>
                          <span class="kp">list.files</span><span class="p">())]</span>
  datos <span class="o">&lt;-</span> <span class="kc">NULL</span>
  <span class="c1">#import</span>
  <span class="kr">for</span><span class="p">(</span>i <span class="kr">in</span> <span class="m">1</span><span class="o">:</span><span class="kp">length</span><span class="p">(</span>a<span class="p">)){</span>
    temp <span class="o">&lt;-</span> <span class="kp">as.data.frame</span><span class="p">(</span>read.delim<span class="p">(</span>
      a<span class="p">[</span>i<span class="p">],</span> sep <span class="o">=</span> separator<span class="p">,</span>
      stringsAsFactors <span class="o">=</span> <span class="kc">FALSE</span><span class="p">))</span>
    
    <span class="kp">print</span><span class="p">(</span><span class="kp">paste0</span><span class="p">(</span><span class="s">&quot;Importing... &quot;</span><span class="p">,</span> a<span class="p">[</span>i<span class="p">]))</span>
    <span class="kr">if</span><span class="p">(</span><span class="kp">length</span><span class="p">(</span>temp<span class="p">)</span><span class="o">==</span><span class="m">6</span><span class="p">){</span>
      temp<span class="o">$</span>Hora <span class="o">&lt;-</span> <span class="kc">NA</span>
      temp<span class="o">$</span>Fecha <span class="o">&lt;-</span> <span class="kc">NA</span>
      temp<span class="o">$</span>Tipo <span class="o">&lt;-</span> <span class="s">&quot;Previous&quot;</span>
    <span class="p">}</span>
    datos <span class="o">&lt;-</span> <span class="kp">rbind.data.frame</span><span class="p">(</span>datos<span class="p">,</span> temp<span class="p">)</span>
    <span class="kp">print</span><span class="p">(</span><span class="kp">paste</span><span class="p">(</span><span class="s">&quot;Data: &quot;</span><span class="p">,</span> <span class="kp">length</span><span class="p">(</span>datos<span class="p">[,</span><span class="m">1</span><span class="p">]),</span><span class="s">&quot; rows&quot;</span><span class="p">))</span>
  <span class="p">}</span>
  <span class="kr">return</span><span class="p">(</span>datos<span class="p">)</span>
<span class="p">}</span>
<span class="c1"># when in the folder, just do...</span>
d <span class="o">&lt;-</span> LoadManyTxt<span class="p">(</span><span class="s">&quot;Interviews_&quot;</span><span class="p">)</span></code></pre></div>

<p>It might seem intense, but this definitely saved me a few hours. As for the outcome of the interviews, I was invited to join two of my school choices, so it all worked out! Although, having gone through the experience, I think the old mantra: “be yourself” is probably better advice than using this app, so use at your own risk!</p>


  </div>
</article>

</body>
</html>
